# üß† BlogPsy API

> –ë—ç–∫–µ–Ω–¥ –¥–ª—è –±–ª–æ–≥-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ—Å—Ç–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á –∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

BlogPsy API ‚Äî —ç—Ç–æ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Express, Prisma ORM –∏ Docker.  
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ production: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω CI/CD, HTTPS, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –±—ç–∫–∞–ø—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π.

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ 

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ **email-—Å–µ—Å—Å–∏–∏**
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
- –ü–æ—Å—Ç—ã: —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ (FTS), –ª–∞–π–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –º–æ–¥–µ—Ä–∞—Ü–∏—è
- –¢–æ–ø–æ–≤—ã–µ –ø–æ—Å—Ç—ã (—Ä–µ–π—Ç–∏–Ω–≥)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ (—á–µ—Ä–µ–∑ MinIO + Sharp)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á (BullMQ): —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Redis): —Å—á—ë—Ç—á–∏–∫–∏, —Å–µ—Å—Å–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Prometheus)
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ (Grafana)
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ API (Swagger UI)

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| –°—Ç–µ–∫              | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã                                                   |
|------------------|----------------------------------------------------------------|
| Backend          | Node.js, Express, TypeScript                                   |
| ORM              | Prisma ORM                                                     |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö      | PostgreSQL (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Full Text Search)                     |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ      | Redis (—Å–µ—Å—Å–∏–∏, –ª–∞–π–∫–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã)                               |
| –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤ | MinIO (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ)                                         |
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è  | Docker, Docker Compose                                         |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥       | Prometheus + Grafana                                           |
| CI/CD            | GitHub Actions                                        |
| –î–µ–ø–ª–æ–π           | VPS, Nginx, Let‚Äôs Encrypt                                      |

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
src/
‚îú‚îÄ‚îÄ core/ ‚Üê –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–æ—Å—Ç—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
‚îú‚îÄ‚îÄ modules/ ‚Üê REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã
‚îú‚îÄ‚îÄ services/ ‚Üê –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Redis, Email, Storage)
‚îú‚îÄ‚îÄ middleware/ ‚Üê Middleware –¥–ª—è Express
‚îú‚îÄ‚îÄ docs/ ‚Üê Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ db.ts ‚Üê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prisma
‚îî‚îÄ‚îÄ app.ts ‚Üê –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä


### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤:
- **Routes**: `src/modules/*`
- **Controllers**: `src/modules/*/controller.ts`
- **Services**: `src/core/*`
- **Models**: `prisma/schema.prisma` + `@prisma/client`

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ **session-based auth**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- JWT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫—Ä–æ–º–µ –ø—É–±–ª–∏—á–Ω—ã—Ö)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ email –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

## üåê API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

üîó [Swagger UI](https://api.blogpsy.ru/api-docs) 

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Prisma Studio** (dev/prod): [http://5.129.200.126:5555](http://5.129.200.126:5555)
- **Swagger UI**: [https://api.blogpsy.ru/api-docs](https://api.blogpsy.ru/api-docs) 
- **Grafana**: [https://grafana.blogpsy.ru/dashboards](https://grafana.blogpsy.ru/dashboards) 
- **Prometheus**: [https://api.blogpsy.ru/prometheus/targets](https://api.blogpsy.ru/prometheus/targets) 

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü–æ–¥–Ω–∏–º–∏—Ç–µ –ë–î –∏ Redis
docker-compose -f docker-compose.dev.yml up -d

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate dev

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev

üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞ VPS
/var/www/api.blogpsy.ru/
‚îú‚îÄ‚îÄ .env.prod
‚îú‚îÄ‚îÄ docker-compose.db.yml
‚îú‚îÄ‚îÄ docker-compose.app.yml
‚îú‚îÄ‚îÄ docker-compose.monitoring.yml
‚îú‚îÄ‚îÄ nginx/conf.d/blog.conf
‚îî‚îÄ‚îÄ deploy.sh

üßπ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã PostgreSQL
–•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –≤ MinIO
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
üì¶ CI/CD Pipeline
Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí GitHub Actions
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Docker Hub
–î–µ–ø–ª–æ–π –Ω–∞ VPS —á–µ—Ä–µ–∑ Ansible
–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

‚úÖ TODO
–î–æ–±–∞–≤–∏—Ç—å –æ–ø–ª–∞—Ç—É (Stripe)
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ Webhooks
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown –≤ –ø–æ—Å—Ç–∞—Ö
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React/Vercel
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è frontend-–∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ Orval
üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã
Telegram: @
Email: an.pochta@gmail.com